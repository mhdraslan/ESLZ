{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "resourceGroups":{
            "value":{
                "rgSettings":[
                    // ADD RESOURCE GROUP SECTIONS BELOW
                    {
                        "rgName":"cnt-aen-addc-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnt-aen-adconnect-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnt-aen-connectivity-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnt-aen-azmonitor-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnt-aen-storageaccounts-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnt-aen-recoveryvaults-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnt-aen-keyvaults-rg",
                        "rgLocation":"UAENorth"
                    }
                ]
            }
        },
        "vnets":{
            "value":{
                "vnetSettings":[
                    {
                        "vNetName":"cnt-aen-identity-vnet",
                        "vNetAddressSpace":["10.200.12.128/25"],
                        "vNetDnsServers":["10.200.1.132","10.200.1.133"],
                        "rgName":"cnt-aen-connectivity-rg"
                    }
                ],
                "peeringSettings":[
                    {
                        "sourceVnetName":"cnt-aen-identity-vnet",
                        "sourceVnetSubscriptionId":"67236ec4-f453-4086-b4d1-78a6a93fad71",
                        "sourceVnetResourceGroup":"cnt-aen-connectivity-rg",
                        "remoteVnetName":"cnt-aen-hub-vnet",
                        "remoteVNetSubscriptionId":"67236ec4-f453-4086-b4d1-78a6a93fad71",
                        "remoteVNetResourceGroup":"cnt-aen-connectivity-rg",
                        "sourceVnetPeeringAllowForwardedTraffic":true,
                        "sourceVnetPeeringAllowGatewayTransit":false,
                        "sourceVnetPeeringUseRemoteGateways":false,
                        "remoteVnetPeeringAllowForwardedTraffic":false,
                        "remoteVnetPeeringAllowGatewayTransit":false,
                        "remoteVnetPeeringUseRemoteGateways":false

                    }
                ]
            }
        },
        "routes":{
            "value":{
                "udrTables":[
                    {
                        "routeTableName":"cnt-aen-spoke-udr",
                        "rgName":"cnt-aen-connectivity-rg"
                    },
                    {
                        "routeTableName":"cnt-aen-blackhole-udr",
                        "rgName":"cnt-aen-connectivity-rg"
                    }
                ],
                "udrSettings":[
                    {
                        "routeEntryName":"rt-blackhole",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"None",
                        "routeEntryNextHopIPAddress":"",
                        "routeTableName":"cnt-aen-blackhole-udr"
                    },  
                    {
                        "routeEntryName":"rt-default",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.200.0.196",
                        "routeTableName":"cnt-aen-spoke-udr"
                    }
                ]
            }
        },
        "subnets":{
            "value":{
                "subnetSettings":[
                    {
                        "subnetName":"DcSubnet",
                        "vNetName":"cnt-aen-identity-vnet",
                        "subnetAddress":"10.200.1.128/26",
                        "rgName":"cnt-aen-connectivity-rg",
                        "udr":"cnt-aen-spoke-udr",
                        "udrRg":"cnt-aen-connectivity-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"PrivateEndpointSubnet",
                        "vNetName":"cnt-aen-identity-vnet",
                        "subnetAddress":"10.200.2.0/24",
                        "rgName":"cnt-aen-connectivity-rg",
                        "udr":"cnt-aen-spoke-udr",
                        "udrRg":"cnt-aen-connectivity-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"AdConnectSubnet",
                        "vNetName":"cnt-aen-identity-vnet",
                        "subnetAddress":"10.200.0.192/26",
                        "rgName":"cnt-aen-connectivity-rg",
                        "udr":"cnt-aen-spoke-udr",
                        "udrRg":"cnt-aen-connectivity-rg",
                        "createNsg":true
                    }
                ]
            }
        },
        "windowsVMs":{
            "value":{
                "vmSettings":[
                    {
                        "vmName":"aendc01",
                        "rgName":"cnt-aen-addc-rg",
                        "vNetName":"cnt-aen-identity-vnet",
                        "vNetResourceGroup":"cnt-aen-connectivity-rg",
                        "subnetName":"DcSubnet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    {
                        "vmName":"aendc02",
                        "rgName":"cnt-aen-addc-rg",
                        "vNetName":"cnt-aen-identity-vnet",
                        "vNetResourceGroup":"cnt-aen-connectivity-rg",
                        "subnetName":"DcSubnet",
                        "vmZones":["2"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    {
                        "vmName":"aenadcnct01",
                        "rgName":"cnt-aen-adconnect-rg",
                        "vNetName":"cnt-aen-identity-vnet",
                        "vNetResourceGroup":"cnt-aen-connectivity-rg",
                        "subnetName":"AdConnectSubnet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    {
                        "vmName":"aenadcnct02",
                        "rgName":"cnt-aen-adconnect-rg",
                        "vNetName":"cnt-aen-identity-vnet",
                        "vNetResourceGroup":"cnt-aen-connectivity-rg",
                        "subnetName":"AdConnectSubnet",
                        "vmZones":["2"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    }
                ]
            }
        },
        "linuxVMs":{
            "value":{
                "vmSettings":[]
            }
        },
        "azFirewall": {
            "value":{
                "buildAzFirewall":false,
                "name":"",
                "rgName":"",
                "vnetName":"",
                "tier":""
            }
        },
        "azBastion": {
            "value":{
                "buildAzBastion":false,
                "name":"",
                "rgName":"",
                "vnetName":"",
                "vNetResourceGroup":"",
                "sku":"",
                "bastionPublicIpName":"",
                "disableCopyPaste":false,
                "enableFileCopy":true,
                "enableIpConnect":true,
                "enableShareableLink":true,
                "enableTunneling":false
            }
        },
        "azVpnGateway": {
            "value":{
                "buildVpnGateway":false,
                "name":"",
                "rgName":"",
                "vpnType":"",
                "vnetName":"",
                "vNetResourceGroup":"",
                "gatewaySku":"",
                "localGatewayName":"",
                "localGatewayIpAddress":"",
                "localAddressPrefix":[],
                "gatewayPublicIpName":""
            }
        },
        "azAppGatewayV2": {
            "value":{
                "settings":[]
            }
        },
        "logAnalyticsWorkspace": {
            "value":{
                "settings":[
                    {
                        "build":true,
                        "name":"cnt-aen-operations-law",
                        "rgName":"cnt-aen-azmonitor-rg",
                        "retention":30,
                        "publicNetworkAccessForIngestion":"Enabled",
                        "publicNetworkAccessForQuery":"Enabled"
                    }
                ]
            }
        }
    },
    "variables": {},
    "resources": [],
    "outputs": {},
    "functions": []
}
