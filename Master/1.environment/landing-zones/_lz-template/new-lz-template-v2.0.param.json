{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "resourceGroups":{
            "value":{
                "rgSettings":[
                    // DO NOT DELETE FIRST (DEPLOYMENT) RESOURCE GROUP. DELETE AFTER SUCCESSFUL DEPLOYMENT
                    {
                        "rgName":"cnxg-ae1-deployment-rg",
                        "rgLocation":"UAENorth"
                    },
                    // ADD RESOURCE GROUP SECTIONS BELOW
                    {
                        "rgName":"cnxg-ae1-hub-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnxg-ae1-monitor-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnxg-ae1-bcdr-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnxg-ae1-privdnszones-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnxg-ae1-identity-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"cnxg-ae1-app1-rg",
                        "rgLocation":"UAENorth"
                    }

                ]
            }
        },
        "vnets":{
            "value":{
                "vnetSettings":[
                    {
                        "vNetName":"cnxg-ae1-hub-vnet",
                        "vNetAddressSpace":"192.168.100.0/24",
                        "vNetDnsServers":["192.168.101.4","192.168.101.5"],
                        "rgName":"cnxg-ae1-hub-rg"
                    },
                    {
                        "vNetName":"cnxg-ae1-identity-vnet",
                        "vNetAddressSpace":"192.168.101.0/24",
                        "vNetDnsServers":["192.168.101.4","192.168.101.5"],
                        "rgName":"cnxg-ae1-identity-rg"
                    },
                    {
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "vNetAddressSpace":"192.168.102.0/24",
                        "vNetDnsServers":["192.168.101.4","192.168.101.5"],
                        "rgName":"cnxg-ae1-app1-rg"
                    }
                ]
            }
        },
        "routes":{
            "value":{
                "udrTables":[
                    {
                        "routeTableName":"cnxg-ae1-hub-gateway-rt",
                        "rgName":"cnxg-ae1-hub-rg"
                    },
                    {
                        "routeTableName":"cnxg-ae1-spoke-rt",
                        "rgName":"cnxg-ae1-hub-rg"
                    }
                ],
                "udrSettings":[
                    {
                        "routeEntryName":"default-route",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"192.168.100.4",
                        "routeTableName":"cnxg-ae1-spoke-rt"
                    },
                    {
                        "routeEntryName":"onprem-route",
                        "routeEntryAddressPrefix":"172.31.0.0/16",
                        "routeEntryType":"None",
                        "routeEntryNextHopIPAddress":"",
                        "routeTableName":"cnxg-ae1-spoke-rt"
                    },
                    {
                        "routeEntryName":"default-route",
                        "routeEntryAddressPrefix":"192.168.0.0/16",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"192.168.100.4",
                        "routeTableName":"cnxg-ae1-hub-gateway-rt"
                    },
                    {
                        "routeEntryName":"onprem-route",
                        "routeEntryAddressPrefix":"172.31.0.0/16",
                        "routeEntryType":"None",
                        "routeEntryNextHopIPAddress":"",
                        "routeTableName":"cnxg-ae1-hub-gateway-rt"
                    }
                ]
            }
        },
        "subnets":{
            "value":{
                "subnetSettings":[
                    {
                        "subnetName":"AzureFirewallSubnet",
                        "vNetName":"cnxg-ae1-hub-vnet",
                        "subnetAddress":"192.168.100.0/26",
                        "rgName":"cnxg-ae1-hub-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":false
                    },
                    {
                        "subnetName":"GatewaySubnet",
                        "vNetName":"cnxg-ae1-hub-vnet",
                        "subnetAddress":"192.168.100.64/26",
                        "rgName":"cnxg-ae1-hub-rg",
                        "udr":"cnxg-ae1-hub-gateway-rt",
                        "udrRg":"cnxg-ae1-hub-rg",
                        "createNsg":false
                    },
                    {
                        "subnetName":"AzureBastionSubnet",
                        "vNetName":"cnxg-ae1-hub-vnet",
                        "subnetAddress":"192.168.100.128/26",
                        "rgName":"cnxg-ae1-hub-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":false
                    },
                    {
                        "subnetName":"PrivateEndpointSubnet",
                        "vNetName":"cnxg-ae1-hub-vnet",
                        "subnetAddress":"192.168.100.192/26",
                        "rgName":"cnxg-ae1-hub-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":true
                    },
                    {
                        "subnetName":"ActiveDirectorySubnet",
                        "vNetName":"cnxg-ae1-identity-vnet",
                        "subnetAddress":"192.168.101.0/26",
                        "rgName":"cnxg-ae1-identity-rg",
                        "udr":"cnxg-ae1-spoke-rt",
                        "udrRg":"cnxg-ae1-hub-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"PrivateEndpointSubnet",
                        "vNetName":"cnxg-ae1-identity-vnet",
                        "subnetAddress":"192.168.101.192/26",
                        "rgName":"cnxg-ae1-identity-rg",
                        "udr":"cnxg-ae1-spoke-rt",
                        "udrRg":"cnxg-ae1-hub-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"FrontendSubnet",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "subnetAddress":"192.168.102.0/26",
                        "rgName":"cnxg-ae1-app1-rg",
                        "udr":"cnxg-ae1-spoke-rt",
                        "udrRg":"cnxg-ae1-hub-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"BackendSubnet",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "subnetAddress":"192.168.102.64/26",
                        "rgName":"cnxg-ae1-app1-rg",
                        "udr":"cnxg-ae1-spoke-rt",
                        "udrRg":"cnxg-ae1-hub-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"PrivateEndpointSubnet",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "subnetAddress":"192.168.102.192/26",
                        "rgName":"cnxg-ae1-app1-rg",
                        "udr":"cnxg-ae1-spoke-rt",
                        "udrRg":"cnxg-ae1-hub-rg",
                        "createNsg":true
                    }
                ]
            }
        },
        "windowsVMs":{
            "value":{
                "vmSettings":[
                    {
                        "vmName":"ae1talabatbe01",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "rgName":"cnxg-ae1-app1-rg",
                        "subnetName":"BackendSubnet",
                        "osDiskType":"StandardSSD_LRS",
                        "osVersionNumber":"2019",
                        "vmSize":"Standard_b2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"dat23uPhutu*"
                    },
                    {
                        "vmName":"ae1talabatbe02",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "rgName":"cnxg-ae1-app1-rg",
                        "subnetName":"BackendSubnet",
                        "osDiskType":"StandardSSD_LRS",
                        "osVersionNumber":"2019",
                        "vmSize":"Standard_b2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"dat23uPhutu*"
                    },
                    {
                        "vmName":"ae1talabatfe01",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "rgName":"cnxg-ae1-app1-rg",
                        "subnetName":"FrontendSubnet",
                        "osDiskType":"StandardSSD_LRS",
                        "osVersionNumber":"2019",
                        "vmSize":"Standard_b2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"dat23uPhutu*"
                    },
                    {
                        "vmName":"ae1talabatfe02",
                        "vNetName":"cnxg-ae1-app1-vnet",
                        "rgName":"cnxg-ae1-app1-rg",
                        "subnetName":"FrontendSubnet",
                        "osDiskType":"StandardSSD_LRS",
                        "osVersionNumber":"2019",
                        "vmSize":"Standard_b2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"dat23uPhutu*"
                    },
                    {
                        "vmName":"ae1addc01",
                        "vNetName":"cnxg-ae1-identity-vnet",
                        "rgName":"cnxg-ae1-identity-rg",
                        "subnetName":"ActiveDirectorySubnet",
                        "osDiskType":"StandardSSD_LRS",
                        "osVersionNumber":"2016",
                        "vmSize":"Standard_b2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"dat23uPhutu*"
                    },
                    {
                        "vmName":"ae1addc02",
                        "vNetName":"cnxg-ae1-identity-vnet",
                        "rgName":"cnxg-ae1-identity-rg",
                        "subnetName":"ActiveDirectorySubnet",
                        "osDiskType":"StandardSSD_LRS",
                        "osVersionNumber":"2016",
                        "vmSize":"Standard_b2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"dat23uPhutu*"
                    }
                ]
            }
        },
        "azFirewall": {
            "value":{
                "buildAzFirewall":true,
                "azFirewallName":"cnxg-ae1-azfw-01",
                "azFirewallVnetName":"cnxg-ae1-hub-vnet",
                "azFirewallTier":"Standard"
            }
        },
        "azVpnGateway": {
            "value":{
                "buildAzVpnGateway":true,
                "vpnGatewayName":"cnxg-ae1-azfw-01",
                "vpnGatewayVnetName":"cnxg-ae1-hub-vnet",
                "vpnGatewayTier":"Standard"
            }
        }
    },
    "variables": {},
    "resources": [],
    "outputs": {},
    "functions": []
}
