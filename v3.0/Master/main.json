{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {},
    "variables": {
        "deploymentLocation":"uaenorth",
        "deploymentUris": {
            "resourceGroup"         : "[uri(deployment().properties.templateLink.uri, '3.templates/resource-group/resourcegroup.json')]",
            "virtualNetwork"        : "[uri(deployment().properties.templateLink.uri, '3.templates/virtual-network/virtualnetwork.json')]",
            "subnet"                : "[uri(deployment().properties.templateLink.uri, '3.templates/virtual-network/subnet.json')]",
            "nsg"                   : "[uri(deployment().properties.templateLink.uri, '3.templates/virtual-network/nsg.json')]",
            "peering"               : "[uri(deployment().properties.templateLink.uri, '3.templates/virtual-network/peering.json')]",
            "udrTable"              : "[uri(deployment().properties.templateLink.uri, '3.templates/udr/routetable.json')]",
            "udrEntry"              : "[uri(deployment().properties.templateLink.uri, '3.templates/udr/routeentry.json')]",
            "udrLink"               : "[uri(deployment().properties.templateLink.uri, '3.templates/udr/linksubnet.json')]",
            "udrLinkwithNsg"        : "[uri(deployment().properties.templateLink.uri, '3.templates/udr/linksubnetnsg.json')]",
            "windowsVm"             : "[uri(deployment().properties.templateLink.uri, '3.templates/virtual-machine/windowsvm.json')]",
            "linuxVm"               : "[uri(deployment().properties.templateLink.uri, '3.templates/virtual-machine/linuxvm.json')]",
            "azFirewall"            : "[uri(deployment().properties.templateLink.uri, '3.templates/az-firewall/azfirewall.json')]",
            "azBastion"             : "[uri(deployment().properties.templateLink.uri, '3.templates/bastion/bastion.json')]",
            "vpnGateway"            : "[uri(deployment().properties.templateLink.uri, '3.templates/network-gateway/vpngw.json')]",
            "logAnalytics"          : "[uri(deployment().properties.templateLink.uri, '3.templates/log-analytics/laws.json')]",
            "keyVault"              : "[uri(deployment().properties.templateLink.uri, '3.templates/misc/kv.json')]",
            "appGatewayV2Waf"       : "[uri(deployment().properties.templateLink.uri, '3.templates/app-gateway/appgw-v2-waf.json')]",
            "appGatewayV2Standard"  : "[uri(deployment().properties.templateLink.uri, '3.templates/app-gateway/appgw-v2-standard.json')]",
            "privatednszone"        : "[uri(deployment().properties.templateLink.uri, '3.templates/dns/privatednszone.json')]",

            "defResourceGroupsUri"  : "[uri(deployment().properties.templateLink.uri, '2.definitions/resource-groups.json')]",
            "defMgSubsUri"          : "[uri(deployment().properties.templateLink.uri, '2.definitions/mgsub.json')]",
            "defNetworkingUri"      : "[uri(deployment().properties.templateLink.uri, '2.definitions/networking.json')]",
            "defNvaUri"             : "[uri(deployment().properties.templateLink.uri, '2.definitions/nva.json')]",
            "defMonitoringUri"      : "[uri(deployment().properties.templateLink.uri, '2.definitions/monitoring.json')]",
            "defVirtualMachinesUri" : "[uri(deployment().properties.templateLink.uri, '2.definitions/virtualmachines.json')]",

            "lzConnectivityUri"     : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/connectivity/base-connectivity-lz.param.json')]",
            "lzIdentityUri"         : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/identity/identity-lz.param.json')]",
            "lzManagementUri"       : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/management/management-lz.param.json')]",
            "lzSecurityUri"         : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/management/security-lz.param.json')]",
            
            "buildPlatformLzUri"    : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/build-platform.json')]",
            "buildConnectivityLzUri": "[uri(deployment().properties.templateLink.uri, '1.environment/platform/connectivity/build-connectivity.json')]",
            "buildIdentityLzUri"    : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/identity/build-identity.json')]",
            "buildManagementLztUri" : "[uri(deployment().properties.templateLink.uri, '1.environment/platform/management/build-management.json')]",
            "buildAppsLzUri"        : "[uri(deployment().properties.templateLink.uri, '1.environment/landing-zones/build-landing-zones.json')]"
        },
        "subscriptions":{
            "connectivity": {
                "id": "67236ec4-f453-4086-b4d1-78a6a93fad71", // "315c8def-c6ca-4b68-b35f-7bca25c963e3",
                "Name": "Connectivity"
            },
            "identity": {
                "id": "5fe2c881-8871-4546-bc4e-07a2e40dbe9e", // "562a5583-7189-454a-8868-9a774bc1ff4e",
                "Name": "Identity"
            },
            "management": {
                "id": "5fe2c881-8871-4546-bc4e-07a2e40dbe9e", // "bc923b92-eb30-4121-b5bc-4f64d07cb5de",
                "Name": "Management"
            },
            "security": {
                "id": "5fe2c881-8871-4546-bc4e-07a2e40dbe9e", // "bc9c92b3-f1ef-4c50-adc2-6a123b7d9f2f",
                "Name": "Security"
            }/*,
            "avd": {
                "id": "5fe2c881-8871-4546-bc4e-07a2e40dbe9e", 
                "Name": "AVD"
            }*/
        },
        "connectivityLzSettings":{
            "resourceGroups":{
                "rgSettings":[
                    // ADD RESOURCE GROUP SECTIONS BELOW
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-privatednszones-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-monitor-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-sharedservices-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-remoteaccess-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-apppublish-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-recovery-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-security-int-rg",
                        "rgLocation":"UAENorth"
                    }
                ]
            },
            "vnets":{
                "vnetSettings":[
                    {
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetAddressSpace":["10.52.0.0/22"],
                        "vNetDnsServers":["10.52.48.4","10.52.48.5"],
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    }
                ],
                "peeringSettings":[]
            },
            "routes":{
                "udrTables":[
                    /* DO NOT DELETE - UDR TABLE TEMPLATE
                    {
                        "routeTableName":"cnt-aen-hub-sharedsvc-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    }
                    */                    
                    {
                        "routeTableName":"dewa-aen-prd-plt-hub-sharedsvc-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    },
                    {
                        "routeTableName":"dewa-aen-prd-plt-hub-gateway-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    },
                    {
                        "routeTableName":"dewa-aen-prd-plt-hub-privendpoint-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    },
                    {
                        "routeTableName":"dewa-aen-prd-plt-hub-apppublish-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    }
                ],
                "udrSettings":[
                    /* DO NOT DELETE - UDR ENTRY TEMPLATE
                    {
                        "routeEntryName":"default-gateway",
                        "routeEntryAddressPrefix":"10.0.0.0/24",
                        "routeEntryType":"VirtualAppliance", //Allowed values: VirtualAppliance, None, Internet, VirtualNetworkGateway
                        "routeEntryNextHopIPAddress":"10.200.0.196",
                        "routeTableName":"cnt-aen-connectivity-gateway-udr"
                    }
                    */
                    {
                        "routeEntryName":"default-gateway",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-sharedsvc-rt"
                    },  
                    {
                        "routeEntryName":"default-gateway",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-privendpoint-rt"
                    },
                    {
                        "routeEntryName":"default-gateway",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"Internet",
                        "routeEntryNextHopIPAddress":"",
                        "routeTableName":"dewa-aen-prd-plt-hub-apppublish-rt"
                    },
                    {
                        "routeEntryName":"to-azure",
                        "routeEntryAddressPrefix":"10.52.0.0/16",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-apppublish-rt"
                    },
                    {
                        "routeEntryName":"identity-vnet",
                        "routeEntryAddressPrefix":"10.52.48.0/26",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-gateway-rt"
                    },
                    {
                        "routeEntryName":"cloudpc-20-vnet",
                        "routeEntryAddressPrefix":"10.52.20.0/22",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-gateway-rt"
                    },
                    {
                        "routeEntryName":"cloudpc-24-vnet",
                        "routeEntryAddressPrefix":"10.52.24.0/22",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-gateway-rt"
                    },
                    {
                        "routeEntryName":"cloudpc-28-vnet",
                        "routeEntryAddressPrefix":"10.52.28.0/22",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-hub-gateway-rt"
                    }
                ]
            },
            "subnets":{
                "subnetSettings":[
                    /* DO NOT DELETE - SUBNET TEMPLATE
                    {
                        "subnetName":"AzureFirewallSubnet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.200.1.192/26",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":false
                    }                    
                    */
                    {
                        "subnetName":"AzureFirewallSubnet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.52.1.192/26",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":false
                    },
                    {
                        "subnetName":"GatewaySubnet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.52.1.0/26",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"dewa-aen-prd-plt-hub-gateway-rt",
                        "udrRg":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "createNsg":false
                    },
                    {
                        "subnetName":"AzureBastionSubnet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.52.1.64/26",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":false
                    },
                    {
                        "subnetName":"SharedService-SNet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.52.1.128/26",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"dewa-aen-prd-plt-hub-sharedsvc-rt",
                        "udrRg":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"PrivateEndpoint-SNet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.52.2.0/24",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"dewa-aen-prd-plt-hub-privendpoint-rt",
                        "udrRg":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "createNsg":true
                    },
                    {
                        "subnetName":"AppGw-SNet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.52.3.0/24",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"dewa-aen-prd-plt-hub-apppublish-rt",
                        "udrRg":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "createNsg":false
                    }
                ]
            },
            "windowsVMs":{
                "vmSettings":[
                    /* DO NOT DELETE. WINDOWS VM TEMPLATE
                    {
                        "vmName":"aenpdns01",
                        "rgName":"cnt-aen-sharedservices-rg",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"SharedService-SNet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_B2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    */
                    {
                        "vmName":"az-srv-dns-01",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"SharedService-SNet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    {
                        "vmName":"az-srv-dns-02",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"SharedService-SNet",
                        "vmZones":["2"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    }
                ]
            },
            "linuxVMs":{
                "vmSettings":[
                    /* DO NOT DELETE. LINUX VM TEMPLATE
                    {
                        "vmName":"aenpdns01",
                        "rgName":"cnt-aen-sharedservices-rg",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"SharedService-SNet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"Canonical",
                        "osOffer":"0001-com-ubuntu-server-jammy",
                        "osSku":"22_04-lts-gen2",
                        "vmSize":"Standard_B2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    */
                ]
            },
            "azFirewall": {
                "buildAzFirewall":true,
                "name":"dewa-aen-prd-plt-hub-afw",
                "vnetName":"dewa-aen-prd-plt-hub-vnet",
                "vnetResourceGroupName":"dewa-aen-prd-plt-sdm-network-int-rg", //Az Firewall must be in same resource group as VNet
                "publicIpName":"dewa-aen-prd-plt-hub-afw-pip-01",
                "tier":"Premium"
            },
            "azBastion": {
                "buildAzBastion":true,
                "name":"dewa-aen-prd-plt-hub-bast",
                "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                "vnetName":"dewa-aen-prd-plt-hub-vnet",
                "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                "sku":"Standard",
                "bastionPublicIpName":"dewa-aen-prd-plt-hub-bast-pip-01",
                "disableCopyPaste":false,
                "enableFileCopy":true,
                "enableIpConnect":true,
                "enableShareableLink":true,
                "enableTunneling":false
            },
            "azVpnGateway": {
                "buildVpnGateway":false,
                "name":"dewa-aen-prd-plt-hub-vnet-gw-vpn",
                "vpnType":"RouteBased",
                "vnetName":"dewa-aen-prd-plt-hub-vnet",
                "vnetResourceGroupName":"dewa-aen-prd-plt-sdm-network-int-rg",
                "gatewaySku":"VpnGw1AZ",
                "localGatewayName":"dewa-aen-prd-plt-onprem-lgw-01",
                "localGatewayIpAddress":"8.8.8.8",
                "localAddressPrefix":["10.0.0.0/8"],
                "gatewayPublicIpName":"dewa-aen-prd-plt-hub-vnet-gw-vpn-pip-01"
            },
            "azAppGatewayV2": {
                "settings":[
                    {
                        "build":true,
                        "name":"dewa-aen-prd-plt-hubapppublish-agw-01",
                        "rgName":"dewa-aen-prd-plt-sdm-apppublish-int-rg",
                        "gwTier":"WAF_v2",
                        "vnetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"AppGw-SNet",
                        "privateIp":"10.52.3.4",
                        "publicIpName":"dewa-aen-prd-plt-hubapppublish-agw-01-pip-01",
                        "publicIpSku":"Standard",
                        "allocationMethod":"Static",
                        "capacity":1,
                        "autoScaleMaxCapacity":2
                    }
                ]
            },
            "privateDnsZones": {
                "build":true,
                "rgName":"dewa-aen-prd-plt-sdm-privatednszones-int-rg",
                "zones": [
                    "[format('privatelink.{0}.azmk8s.io', toLower(variables('deploymentLocation')))]",
                    "[format('privatelink.{0}.batch.azure.com', toLower(variables('deploymentLocation')))]",
                    "[format('privatelink.{0}.kusto.windows.net', toLower(variables('deploymentLocation')))]",
                    "privatelink.adf.azure.com",
                    "privatelink.afs.azure.net",
                    "privatelink.agentsvc.azure-automation.net",
                    "privatelink.analysis.windows.net",
                    "privatelink.api.azureml.ms",
                    "privatelink.azconfig.io",
                    "privatelink.azure-api.net",
                    "privatelink.azure-automation.net",
                    "privatelink.azurecr.io",
                    "privatelink.azure-devices.net",
                    "privatelink.azure-devices-provisioning.net",
                    "privatelink.azurehdinsight.net",
                    "privatelink.azurehealthcareapis.com",
                    "privatelink.azurestaticapps.net",
                    "privatelink.azuresynapse.net",
                    "privatelink.azurewebsites.net",
                    "privatelink.batch.azure.com",
                    "privatelink.blob.core.windows.net",
                    "privatelink.cassandra.cosmos.azure.com",
                    "privatelink.cognitiveservices.azure.com",
                    "privatelink.database.windows.net",
                    "privatelink.datafactory.azure.net",
                    "privatelink.dev.azuresynapse.net",
                    "privatelink.dfs.core.windows.net",
                    "privatelink.dicom.azurehealthcareapis.com",
                    "privatelink.digitaltwins.azure.net",
                    "privatelink.directline.botframework.com",
                    "privatelink.documents.azure.com",
                    "privatelink.eventgrid.azure.net",
                    "privatelink.file.core.windows.net",
                    "privatelink.gremlin.cosmos.azure.com",
                    "privatelink.guestconfiguration.azure.com",
                    "privatelink.his.arc.azure.com",
                    "privatelink.kubernetesconfiguration.azure.com",
                    "privatelink.managedhsm.azure.net",
                    "privatelink.mariadb.database.azure.com",
                    "privatelink.media.azure.net",
                    "privatelink.mongo.cosmos.azure.com",
                    "privatelink.monitor.azure.com",
                    "privatelink.mysql.database.azure.com",
                    "privatelink.notebooks.azure.net",
                    "privatelink.ods.opinsights.azure.com",
                    "privatelink.oms.opinsights.azure.com",
                    "privatelink.pbidedicated.windows.net",
                    "privatelink.postgres.database.azure.com",
                    "privatelink.prod.migration.windowsazure.com",
                    "privatelink.purview.azure.com",
                    "privatelink.purviewstudio.azure.com",
                    "privatelink.queue.core.windows.net",
                    "privatelink.redis.cache.windows.net",
                    "privatelink.redisenterprise.cache.azure.net",
                    "privatelink.search.windows.net",
                    "privatelink.service.signalr.net",
                    "privatelink.servicebus.windows.net",
                    "privatelink.siterecovery.windowsazure.com",
                    "privatelink.sql.azuresynapse.net",
                    "privatelink.table.core.windows.net",
                    "privatelink.table.cosmos.azure.com",
                    "privatelink.tip1.powerquery.microsoft.com",
                    "privatelink.token.botframework.com",
                    "privatelink.vaultcore.azure.net",
                    "privatelink.web.core.windows.net",
                    "privatelink.webpubsub.azure.com"
                ]
            }
        },
        "identityLzSettings":{
            "resourceGroups":{
                "rgSettings":[
                    // ADD RESOURCE GROUP SECTIONS BELOW
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-monitor-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-recovery-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-security-int-rg",
                        "rgLocation":"UAENorth"
                    },
                    {
                        "rgName":"dewa-aen-prd-plt-sdm-dcs-int-rg",
                        "rgLocation":"UAENorth"
                    }
                ]
            },
            "vnets":{
                "vnetSettings":[
                    {
                        "vNetName":"dewa-aen-prd-plt-identity-vnet",
                        "vNetAddressSpace":["10.52.48.0/26"],
                        "vNetDnsServers":["10.52.48.4","10.52.48.5"],
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    }
                ],
                "peeringSettings":[
                    /* DO NOT DELETE. PEERING TEMPLATE
                    {
                        "sourceVnetName":"cnt-aen-identity-vnet",
                        "sourceVnetSubscriptionId":"[variables('subscriptions').identity.id]",
                        "sourceVnetResourceGroup":"cnt-aen-connectivity-rg",
                        "remoteVnetName":"cnt-aen-hub-vnet",
                        "remoteVNetSubscriptionId":"[variables('subscriptions').connectivity.id]",
                        "remoteVNetResourceGroup":"cnt-aen-connectivity-rg",
                        "sourceVnetPeeringAllowForwardedTraffic":true,
                        "sourceVnetPeeringAllowGatewayTransit":false,
                        "sourceVnetPeeringUseRemoteGateways":true,
                        "remoteVnetPeeringAllowForwardedTraffic":false,
                        "remoteVnetPeeringAllowGatewayTransit":false,
                        "remoteVnetPeeringUseRemoteGateways":false,
                        "sourcePeeringName": "", // Leave empty to use default naming
                        "remotePeeringName": ""  // Leave empty to use default naming
                    }
                    */
                    {
                        "sourceVnetName":"dewa-aen-prd-plt-identity-vnet",
                        "sourceVnetSubscriptionId":"[variables('subscriptions').identity.id]",
                        "sourceVnetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "remoteVnetName":"dewa-aen-prd-plt-hub-vnet",
                        "remoteVNetSubscriptionId":"[variables('subscriptions').connectivity.id]",
                        "remoteVNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "sourceVnetPeeringAllowForwardedTraffic":true,
                        "sourceVnetPeeringAllowGatewayTransit":false,
                        "sourceVnetPeeringUseRemoteGateways":true,
                        "remoteVnetPeeringAllowForwardedTraffic":false,
                        "remoteVnetPeeringAllowGatewayTransit":false,
                        "remoteVnetPeeringUseRemoteGateways":false,
                        "sourcePeeringName": "dewa-aen-prd-plt-identity-hub",
                        "remotePeeringName": "dewa-aen-prd-plt-hub-identity"
                    }
                ]
            },
            "routes":{
                "udrTables":[
                    /* DO NOT DELETE - UDR TABLE TEMPLATE
                    {
                        "routeTableName":"cnt-aen-hub-sharedsvc-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    }
                    */                    
                    {
                        "routeTableName":"dewa-aen-prd-plt-identity-dcs-rt",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg"
                    }
                ],
                "udrSettings":[
                    /* DO NOT DELETE - UDR ENTRY TEMPLATE
                    {
                        "routeEntryName":"default-gateway",
                        "routeEntryAddressPrefix":"10.0.0.0/24",
                        "routeEntryType":"VirtualAppliance", //Allowed values: VirtualAppliance, None, Internet, VirtualNetworkGateway
                        "routeEntryNextHopIPAddress":"10.200.0.196",
                        "routeTableName":"cnt-aen-connectivity-gateway-udr"
                    }
                    */
                    {
                        "routeEntryName":"default-gateway",
                        "routeEntryAddressPrefix":"0.0.0.0/0",
                        "routeEntryType":"VirtualAppliance",
                        "routeEntryNextHopIPAddress":"10.52.1.196",
                        "routeTableName":"dewa-aen-prd-plt-identity-dcs-rt"
                    }
                ]
            },
            "subnets":{
                "subnetSettings":[
                    /* DO NOT DELETE - SUBNET TEMPLATE
                    {
                        "subnetName":"AzureFirewallSubnet",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "subnetAddress":"10.200.1.192/26",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"",
                        "udrRg":"",
                        "createNsg":false
                    }                    
                    */
                    {
                        "subnetName":"DCs-SNet",
                        "vNetName":"dewa-aen-prd-plt-identity-vnet",
                        "subnetAddress":"10.52.48.0/28",
                        "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "udr":"dewa-aen-prd-plt-identity-dcs-rt",
                        "udrRg":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "createNsg":true
                    }
                ]
            },
            "windowsVMs":{
                "vmSettings":[
                    /* DO NOT DELETE. WINDOWS VM TEMPLATE
                    {
                        "vmName":"aenpdns01",
                        "rgName":"cnt-aen-sharedservices-rg",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"SharedService-SNet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_B2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    */
                    {
                        "vmName":"az-srv-dc-01",
                        "rgName":"dewa-aen-prd-plt-sdm-dcs-int-rg",
                        "vNetName":"dewa-aen-prd-plt-identity-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"DCs-SNet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    {
                        "vmName":"az-srv-dc-02",
                        "rgName":"dewa-aen-prd-plt-sdm-dcs-int-rg",
                        "vNetName":"dewa-aen-prd-plt-identity-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"DCs-SNet",
                        "vmZones":["2"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"microsoftwindowsserver",
                        "osOffer":"windowsserver",
                        "osSku":"2022-datacenter-g2",
                        "vmSize":"Standard_D2s_v5",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    }
                ]
            },
            "linuxVMs":{
                "vmSettings":[
                    /* DO NOT DELETE. LINUX VM TEMPLATE
                    {
                        "vmName":"aenpdns01",
                        "rgName":"cnt-aen-sharedservices-rg",
                        "vNetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"SharedService-SNet",
                        "vmZones":["1"],
                        "osDiskType":"StandardSSD_LRS",
                        "osPublisher":"Canonical",
                        "osOffer":"0001-com-ubuntu-server-jammy",
                        "osSku":"22_04-lts-gen2",
                        "vmSize":"Standard_B2s",
                        "adminUsername":"localadmin",
                        "adminPassword":"Pa$$w0rd123*"
                    },
                    */
                ]
            },
            "azFirewall": {
                "buildAzFirewall":false,
                "name":"dewa-aen-prd-plt-hub-afw",
                "vnetName":"dewa-aen-prd-plt-hub-vnet",
                "vnetResourceGroupName":"dewa-aen-prd-plt-sdm-network-int-rg", //Az Firewall must be in same resource group as VNet
                "publicIpName":"dewa-aen-prd-plt-hub-afw-pip-01",
                "tier":"Premium"
            },
            "azBastion": {
                "buildAzBastion":false,
                "name":"dewa-aen-prd-plt-hub-bast",
                "rgName":"dewa-aen-prd-plt-sdm-network-int-rg",
                "vnetName":"dewa-aen-prd-plt-hub-vnet",
                "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                "sku":"Standard",
                "bastionPublicIpName":"dewa-aen-prd-plt-hub-bast-pip-01",
                "disableCopyPaste":false,
                "enableFileCopy":true,
                "enableIpConnect":true,
                "enableShareableLink":true,
                "enableTunneling":false
            },
            "azVpnGateway": {
                "buildVpnGateway":false,
                "name":"dewa-aen-prd-plt-hub-vnet-gw-vpn",
                "vpnType":"RouteBased",
                "vnetName":"dewa-aen-prd-plt-hub-vnet",
                "vnetResourceGroupName":"dewa-aen-prd-plt-sdm-network-int-rg",
                "gatewaySku":"VpnGw1AZ",
                "localGatewayName":"dewa-aen-prd-plt-onprem-lgw-01",
                "localGatewayIpAddress":"8.8.8.8",
                "localAddressPrefix":["10.0.0.0/8"],
                "gatewayPublicIpName":"dewa-aen-prd-plt-hub-vnet-gw-vpn-pip-01"
            },
            "azAppGatewayV2": {
                "settings":[
                    {
                        "build":false,
                        "name":"dewa-aen-prd-plt-hubapppublish-agw-01",
                        "rgName":"dewa-aen-prd-plt-sdm-apppublish-int-rg",
                        "gwTier":"WAF_v2",
                        "vnetName":"dewa-aen-prd-plt-hub-vnet",
                        "vNetResourceGroup":"dewa-aen-prd-plt-sdm-network-int-rg",
                        "subnetName":"AppGw-SNet",
                        "privateIp":"10.52.3.4",
                        "publicIpName":"dewa-aen-prd-plt-hubapppublish-agw-01-pip-01",
                        "publicIpSku":"Standard",
                        "allocationMethod":"Static",
                        "capacity":1,
                        "autoScaleMaxCapacity":2
                    }
                ]
            },
            "privateDnsZones": {
                "build":false,
                "rgName":"dewa-aen-prd-plt-sdm-privatednszones-int-rg",
                "zones": [
                    "[format('privatelink.{0}.azmk8s.io', toLower(variables('deploymentLocation')))]",
                    "[format('privatelink.{0}.batch.azure.com', toLower(variables('deploymentLocation')))]",
                    "[format('privatelink.{0}.kusto.windows.net', toLower(variables('deploymentLocation')))]",
                    "privatelink.adf.azure.com",
                    "privatelink.afs.azure.net",
                    "privatelink.agentsvc.azure-automation.net",
                    "privatelink.analysis.windows.net",
                    "privatelink.api.azureml.ms",
                    "privatelink.azconfig.io",
                    "privatelink.azure-api.net",
                    "privatelink.azure-automation.net",
                    "privatelink.azurecr.io",
                    "privatelink.azure-devices.net",
                    "privatelink.azure-devices-provisioning.net",
                    "privatelink.azurehdinsight.net",
                    "privatelink.azurehealthcareapis.com",
                    "privatelink.azurestaticapps.net",
                    "privatelink.azuresynapse.net",
                    "privatelink.azurewebsites.net",
                    "privatelink.batch.azure.com",
                    "privatelink.blob.core.windows.net",
                    "privatelink.cassandra.cosmos.azure.com",
                    "privatelink.cognitiveservices.azure.com",
                    "privatelink.database.windows.net",
                    "privatelink.datafactory.azure.net",
                    "privatelink.dev.azuresynapse.net",
                    "privatelink.dfs.core.windows.net",
                    "privatelink.dicom.azurehealthcareapis.com",
                    "privatelink.digitaltwins.azure.net",
                    "privatelink.directline.botframework.com",
                    "privatelink.documents.azure.com",
                    "privatelink.eventgrid.azure.net",
                    "privatelink.file.core.windows.net",
                    "privatelink.gremlin.cosmos.azure.com",
                    "privatelink.guestconfiguration.azure.com",
                    "privatelink.his.arc.azure.com",
                    "privatelink.kubernetesconfiguration.azure.com",
                    "privatelink.managedhsm.azure.net",
                    "privatelink.mariadb.database.azure.com",
                    "privatelink.media.azure.net",
                    "privatelink.mongo.cosmos.azure.com",
                    "privatelink.monitor.azure.com",
                    "privatelink.mysql.database.azure.com",
                    "privatelink.notebooks.azure.net",
                    "privatelink.ods.opinsights.azure.com",
                    "privatelink.oms.opinsights.azure.com",
                    "privatelink.pbidedicated.windows.net",
                    "privatelink.postgres.database.azure.com",
                    "privatelink.prod.migration.windowsazure.com",
                    "privatelink.purview.azure.com",
                    "privatelink.purviewstudio.azure.com",
                    "privatelink.queue.core.windows.net",
                    "privatelink.redis.cache.windows.net",
                    "privatelink.redisenterprise.cache.azure.net",
                    "privatelink.search.windows.net",
                    "privatelink.service.signalr.net",
                    "privatelink.servicebus.windows.net",
                    "privatelink.siterecovery.windowsazure.com",
                    "privatelink.sql.azuresynapse.net",
                    "privatelink.table.core.windows.net",
                    "privatelink.table.cosmos.azure.com",
                    "privatelink.tip1.powerquery.microsoft.com",
                    "privatelink.token.botframework.com",
                    "privatelink.vaultcore.azure.net",
                    "privatelink.web.core.windows.net",
                    "privatelink.webpubsub.azure.com"
                ]
            }
        },
        "appLzSettings":{}
    },
    "resources": [
        // BUILD MANAGEMENT GROUPS

        // BUILD PLATFORM LZ
        {
            "type":"Microsoft.Resources/deployments",
            "apiVersion":"2019-05-01",
            "Name":"Launch-Platform-Build",
            "location":"[deployment().location]",
            "dependsOn": [],
            "properties":{
                "mode":"Incremental",
                "templatelink":{
                    "uri":"[variables('deploymentUris').buildPlatformLzUri]"
                },
                "parameters": {
                    "deploymentUris": {
                        "value":"[variables('deploymentUris')]"
                    },
                    "subscriptions": {
                        "value":"[variables('subscriptions')]"
                    },
                    "connectivityLzSettings": {
                        "value":"[variables('connectivityLzSettings')]"
                    },
                    "identityLzSettings": {
                        "value":"[variables('identityLzSettings')]"
                    },
                    "managementLzSettings": {
                        "value":"[variables('connectivityLzSettings')]"
                    },
                    "securityLzSettings": {
                        "value":"[variables('connectivityLzSettings')]"
                    }
                }
            }
        }/*,
        //BUILD APP LZ
        {
            "type":"Microsoft.Resources/deployments",
            "apiVersion":"2019-05-01",
            "Name":"Launch-Landing-Zones-Build",
            "location":"[deployment().location]",
            "dependsOn": [],
            "properties":{
                "mode":"Incremental",
                "templatelink":{
                    "uri":"[variables('deploymentUris').buildAppsLzUri]"
                }
            }
        }*/
    ],
    "outputs": {},
    "functions": []
}